<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rodent Riddle</title>
    <link rel="stylesheet" href="style.css">
    <script src="main.js" type="module"></script>
    <script>
        function toggleAnswer(button) {
            const answer = button.nextElementSibling;
            if (answer.style.display === 'none') {
                answer.style.display = 'block';
                button.textContent = 'Hide our suggested answer';
            } else {
                answer.style.display = 'none';
                button.textContent = 'Show our suggested answer';
            }
        }
    </script>
</head>
<body>
    <h1>Rodent Riddle</h1>
    

    <!-- Circadian Rhythm -->
    <h2>Circadian Rhythm</h2>
    <p class="viz-instructions">
        This visualization shows mouse movement patterns and body temperature over multiple day/night cycles. The main plot (left) displays mouse positions and their movement (more active movement represent higher activity levels), while the right plot shows the relationship between temperature and activity levels. The color of each point represents the body temperature of the mouse.
    </p>
    <ul class="viz-features">
        <li><strong>Mouse Movement:</strong> Each point represents a mouse, with colors indicating body temperature (blue: cooler, red: warmer).</li>
        <li><strong>Day/Night Cycles:</strong> Background changes indicate light conditions, with the status shown in the top-right corner.</li>
        <li><strong>Interactive Features:</strong>
            <ul>
                <li>Hover over any point to see detailed mouse data and highlight the same mouse in both plots</li>
                <li>Hover pauses the animation automatically</li>
                <li>Use the time slider to navigate through the data</li>
                <li>Play/Pause and Reset buttons control the animation</li>
            </ul>
        </li>
        <li><strong>Temperature Scale:</strong> The color bar below the main plot shows the temperature range from 35°C (blue) to 39°C (red).</li>
    </ul>
    <div id="circadian-viz">
        <!-- Visualization will be dynamically added here (circadian.js) -->    
    </div>
    <p class="viz-questions">
        <strong>Question to consider:</strong> How do the activity patterns of these mice across day and night cycles reveal their natural circadian rhythm?
    </p>
    <button class="show-answer-btn" onclick="toggleAnswer(this)">Show our suggested answer</button>
    <p class="viz-answer" style="display: none;">
        <strong>Our suggested answer:</strong> The visualization reveals clear circadian patterns in mouse behavior. During light-off periods (night), mice consistently show heightened activity levels, coupled with elevated body temperatures (shown by warmer colors). Conversely, during light-on periods (day), their activity decreases significantly, and body temperatures tend to be cooler. This day-night activity pattern strongly indicates nocturnal behavior, which is an evolutionary adaptation common in rodents. The synchronization between activity levels and body temperature also demonstrates how circadian rhythms coordinate multiple physiological processes to optimize survival during their most active periods.
    </p>

    <!-- Activity Ranking Visualization -->
    <h2>Activity Rankings: Day vs Night Comparison</h2>
    <p class="viz-instructions">
        This visualization provides a comprehensive view of mouse activity patterns across day and night cycles, with a special focus on gender differences. The dual bar charts show activity levels during light-off (night) and light-on (day) periods, with mice automatically sorted by their activity levels. The visualization includes mini-plots showing the proportion of male vs female activity over time, allowing for detailed analysis of gender-based activity patterns.
    </p>
    <ul class="viz-features">
        <li><strong>Dual Bar Charts:</strong> Upper bars (light off) and lower bars (light on) show activity levels, with mice ranked by activity at each time point.</li>
        <li><strong>Gender Analysis:</strong> Blue bars represent male mice, pink bars represent female mice, with mini-plots showing the proportion of activity by gender over time.</li>
        <li><strong>Dynamic Features:</strong>
            <ul>
                <li>Real-time activity ranking updates as you move through time</li>
                <li>Running average rankings show consistent activity patterns</li>
                <li>Hover over bars to see detailed mouse information and highlight corresponding bars across all plots</li>
                <li>Mini-plots reveal gender activity proportions throughout the cycle</li>
            </ul>
        </li>
        <li><strong>Interactive Controls:</strong>
            <ul>
                <li>Time slider to navigate through a 12-hour cycle (720 minutes)</li>
                <li>Day selector to compare activity patterns across different days</li>
                <li>Play/Pause animation to observe activity changes over time</li>
            </ul>
        </li>
    </ul>
    <div id="activity-rank-viz">
        <!-- Visualization will be dynamically added here (activity_rank.js) -->    
    </div>
    <p class="viz-questions">
        <strong>Question to consider:</strong> How do the activity levels of male and female mice compare during different periods of the day, and what changes do we observe in female activity patterns during estrus days?
    </p>
    <button class="show-answer-btn" onclick="toggleAnswer(this)">Show our suggested answer</button>
    <p class="viz-answer" style="display: none;">
        <strong>Our suggested answer:</strong> The visualization reveals interesting patterns in gender-based activity levels. Overall, male mice tend to show higher activity levels compared to female mice across both day and night periods. However, during estrus days, we observe a notable increase in female activity levels that extends beyond just the night period. While this increased activity doesn't surpass the overall male activity levels, it represents a significant behavioral change in female mice during their reproductive cycle. The mini-plots showing gender activity proportions help visualize these patterns, with the male proportion typically being higher but showing interesting variations during estrus periods. These findings suggest that while male mice maintain generally higher activity levels, female activity patterns are more dynamic and influenced by their reproductive state.
    </p>


    <!-- Other Visualizations (Use the same template) -->
    <h2>Other Visualizations ...</h2>
    <p class="viz-instructions"></p>
    <ul class="viz-features"></ul>
    <div id="other-viz">
        <!-- Visualization will be dynamically added here (other-file.js) -->    
    </div>
    <p class="viz-questions"></p>
    <button class="show-answer-btn" onclick="toggleAnswer(this)">Show our suggested answer</button>
    <p class="viz-answer" style="display: none;"></p>
<hr>
<h2>Initial Prototype Writeup</h2>
<div class="reflection-box">
<p>
    So far, we have created our central visualization and have laid out the template for any additional visualizations. The central visualization is an overview of most of the features all at once. It aims to show viewers the general heat and activity trends of mice throughout each period of day and night. Smaller future visualizations will focus on more specific aspects of the dataset. By creating visualization and suggested response templates, additional work for the project will be streamlined. Our process is to add in a short visualization to guide viewers through the interactive visualization, add a d3 plot, ask viewers an insightful question, and to answer their question using the drop-down suggested answer component. Using this format, our project can meet its original goal of teaching researchers about their mice in an engaging way, but can also be used to teach people (especially children) how to gain insight from a graph or visualization.
</p>
<p>
    The most challenging part of the project remaining is to curate a few more visualizations that feel fresh and interactive. Our dataset is limited in its number of features (we can explore activity, temperature, gender, and estrus cycles), and so we'll need to work to create visualizations that add insight without feeling redundant. Our second challenge will be to come up with critical engagement questions that strike a balance between being too technical and boringly simple. A mix of difficulties will be beneficial, and our target is for the level of engagement to be at the point to make an older kid think for a few minutes and require most viewers to take a second look at the visualization before answering. These questions give us the most opportunity to ensure that scientists aren't missing interesting details and to promote learning for the rest of our audience, so it's important that we get their level of difficulty right.
</p>
</div>

</body>
</html>
